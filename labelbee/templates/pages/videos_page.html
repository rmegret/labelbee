{% extends "common/page_base.html" %} {# common/page_base.html extends layout.html #}

{% block content %}

<meta name="csrf-token" content="{{ csrf_token() }}">

<script type="text/javascript">
    var csrftoken = $('meta[name=csrf-token]').attr('content')

    $.ajaxSetup({
        beforeSend: function (xhr, settings) {
            if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type)) {
                xhr.setRequestHeader("X-CSRFToken", csrftoken)
            }
        }
    })
</script>


<h1>Videos: {{ uri }} </h1>

<div>
    <div class="col-md-3">
        <div class="form-group" max_width=100>
            <input type="text" onkeypress="is_enter(event)" class="form-control" placeholder="Enter Search">
        </div>
    </div>
    <div class="col-md-3 offset-md-3">
        <div class="form-group">
            <form action="/videos" method="post" role="form">
                <input type="submit" class="btn btn-primary" value="Next Page" />
            </form>
        </div>
    </div>
</div>


<table class="table" id="videos_table">
    <thead>
        <th>Video Name</th>
        <th>Colony</th>
        <th>Date and Time</th>
    </thead>
    <tbody id="videosBody"></tbody>
    {% for item in videos %}
    <tr>
        <td>{{ item.video_name }}</td>
        <td>{{ item.colony }}</td>
        <td>{{ item.timestamp }}</td>
    </tr>
    {% endfor %}
</table>

<!-- <script>
    let is_enter = (e) => {
        if (e.keyCode === 13) {
            search();
        }
    }

    let search = () => {
        alert("started")
        $.post("https://www.easyprogramming.net/heroes.json", (data) => {
            $(data).each((i, hero) => {
                $("#videosBody").append($("<tr>")
                    .append($("<td>").append(hero.strength))
                    .append($("<td>").append(hero.name))
                    .append($("<td>").append(hero.superheroName))
                    .append($("<td>").append(hero.city)))

            });
        })
            .done(() => {
                alert("Completed");
            })
            .always(() => {
                alert("running");
            });
    }
</script> -->



{% endblock %}